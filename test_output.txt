============================= test session starts =============================
platform win32 -- Python 3.12.6, pytest-8.4.2, pluggy-1.5.0
rootdir: C:\Users\dmedl\Projects\Theoria
configfile: pyproject.toml
plugins: anyio-4.11.0, Faker-25.9.2, hypothesis-6.124.6, cov-5.0.0, flask-1.3.0, subtests-0.14.2, timeout-2.3.1, schemathesis-3.39.16
collected 2 items

tests\api\test_health.py .F                                              [100%]

================================== FAILURES ===================================
__________________ test_health_endpoint_reports_worst_status __________________
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\_utils.py", line 79, in collapse_excgroups
  |     yield
  |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py", line 183, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py", line 344, in from_call
    |     result: TResult | None = func()
    |                              ^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py", line 246, in <lambda>
    |     lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_hooks.py", line 513, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 182, in _multicall
    |     return outcome.get_result()
    |            ^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_result.py", line 100, in get_result
    |     raise exc.with_traceback(exc.__traceback__)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 167, in _multicall
    |     teardown.throw(outcome._exception)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\logging.py", line 850, in pytest_runtest_call
    |     yield
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 167, in _multicall
    |     teardown.throw(outcome._exception)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\capture.py", line 900, in pytest_runtest_call
    |     return (yield)
    |             ^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 167, in _multicall
    |     teardown.throw(outcome._exception)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\skipping.py", line 263, in pytest_runtest_call
    |     return (yield)
    |             ^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 103, in _multicall
    |     res = hook_impl.function(*args)
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\runner.py", line 178, in pytest_runtest_call
    |     item.runtest()
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\python.py", line 1671, in runtest
    |     self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_hooks.py", line 513, in __call__
    |     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_manager.py", line 120, in _hookexec
    |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 139, in _multicall
    |     raise exception.with_traceback(exception.__traceback__)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 122, in _multicall
    |     teardown.throw(exception)  # type: ignore[union-attr]
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\schemathesis\extra\pytest_plugin.py", line 312, in pytest_pyfunc_call
    |     yield
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\pluggy\_callers.py", line 103, in _multicall
    |     res = hook_impl.function(*args)
    |           ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\python.py", line 157, in pytest_pyfunc_call
    |     result = testfunction(**testargs)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "c:\Users\dmedl\Projects\Theoria\tests\api\test_health.py", line 55, in test_health_endpoint_reports_worst_status
    |     response = client.get("/health")
    |                ^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 479, in get
    |     return super().get(
    |            ^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 1053, in get
    |     return self.request(
    |            ^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 451, in request
    |     return super().request(
    |            ^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 825, in request
    |     return self.send(request, auth=auth, follow_redirects=follow_redirects)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 914, in send
    |     response = self._send_handling_auth(
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 942, in _send_handling_auth
    |     response = self._send_handling_redirects(
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 979, in _send_handling_redirects
    |     response = self._send_single_request(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 1014, in _send_single_request
    |     response = transport.handle_request(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 354, in handle_request
    |     raise exc
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 351, in handle_request
    |     portal.call(self.app, scope, receive, send)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\anyio\from_thread.py", line 321, in call
    |     return cast(T_Retval, self.start_task_soon(func, *args).result())
    |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Python312\Lib\concurrent\futures\_base.py", line 456, in result
    |     return self.__get_result()
    |            ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Python312\Lib\concurrent\futures\_base.py", line 401, in __get_result
    |     raise self._exception
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\anyio\from_thread.py", line 252, in _call_func
    |     retval = await retval_or_awaitable
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\fastapi\applications.py", line 1134, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\applications.py", line 113, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\errors.py", line 186, in __call__
    |     raise exc
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py", line 182, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Python312\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py", line 184, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\Projects\Theoria\theo\infrastructure\api\app\bootstrap\app_factory.py", line 230, in add_test_trace_id
    |     trace_context = get_trace_context()
    |                     ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\dmedl\Projects\Theoria\theo\infrastructure\api\app\bootstrap\app_factory.py", line 139, in get_trace_context
    |     from ..tracing import get_current_trace_id
    | ModuleNotFoundError: No module named 'theo.infrastructure.api.app.tracing'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "c:\Users\dmedl\Projects\Theoria\tests\api\test_health.py", line 55, in test_health_endpoint_reports_worst_status
    response = client.get("/health")
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 479, in get
    return super().get(
           ^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 1053, in get
    return self.request(
           ^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 451, in request
    return super().request(
           ^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 825, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 914, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 354, in handle_request
    raise exc
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py", line 351, in handle_request
    portal.call(self.app, scope, receive, send)
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\anyio\from_thread.py", line 321, in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\concurrent\futures\_base.py", line 456, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\anyio\from_thread.py", line 252, in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\fastapi\applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\errors.py", line 186, in __call__
    raise exc
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py", line 182, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
  File "C:\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\_utils.py", line 85, in collapse_excgroups
    raise exc
  File "C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py", line 184, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\Projects\Theoria\theo\infrastructure\api\app\bootstrap\app_factory.py", line 230, in add_test_trace_id
    trace_context = get_trace_context()
                    ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\dmedl\Projects\Theoria\theo\infrastructure\api\app\bootstrap\app_factory.py", line 139, in get_trace_context
    from ..tracing import get_current_trace_id
ModuleNotFoundError: No module named 'theo.infrastructure.api.app.tracing'

During handling of the above exception, another exception occurred:

monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x000002210E3BB3E0>

    def test_health_endpoint_reports_worst_status(monkeypatch) -> None:
        def healthy_probe() -> str:
            return "OK"
    
        def unavailable_probe() -> str:
            raise health_module.HealthProbeError(
                "Redis unreachable", status=health_module.HealthStatus.UNAVAILABLE
            )
    
        monkeypatch.setattr(
            health_module,
            "DEFAULT_PROBES",
            {
                "database": healthy_probe,
                "redis": unavailable_probe,
                "embeddings": healthy_probe,
                "graph": healthy_probe,
            },
        )
    
        with TestClient(app) as client:
>           response = client.get("/health")
                       ^^^^^^^^^^^^^^^^^^^^^

tests\api\test_health.py:55: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py:479: in get
    return super().get(
..\..\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py:1053: in get
    return self.request(
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py:451: in request
    return super().request(
..\..\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py:825: in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py:914: in send
    response = self._send_handling_auth(
..\..\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py:942: in _send_handling_auth
    response = self._send_handling_redirects(
..\..\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py:979: in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python312\site-packages\httpx\_client.py:1014: in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py:354: in handle_request
    raise exc
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\testclient.py:351: in handle_request
    portal.call(self.app, scope, receive, send)
..\..\AppData\Roaming\Python\Python312\site-packages\anyio\from_thread.py:321: in call
    return cast(T_Retval, self.start_task_soon(func, *args).result())
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\concurrent\futures\_base.py:456: in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\concurrent\futures\_base.py:401: in __get_result
    raise self._exception
..\..\AppData\Roaming\Python\Python312\site-packages\anyio\from_thread.py:252: in _call_func
    retval = await retval_or_awaitable
             ^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python312\site-packages\fastapi\applications.py:1134: in __call__
    await super().__call__(scope, receive, send)
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\applications.py:113: in __call__
    await self.middleware_stack(scope, receive, send)
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\errors.py:186: in __call__
    raise exc
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\errors.py:164: in __call__
    await self.app(scope, receive, _send)
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py:182: in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ^^^^^^^^^^^^^^^^^^^^
C:\Python312\Lib\contextlib.py:158: in __exit__
    self.gen.throw(value)
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\_utils.py:85: in collapse_excgroups
    raise exc
..\..\AppData\Roaming\Python\Python312\site-packages\starlette\middleware\base.py:184: in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
theo\infrastructure\api\app\bootstrap\app_factory.py:230: in add_test_trace_id
    trace_context = get_trace_context()
                    ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

    def get_trace_context() -> SimpleNamespace:
        """Return a lightweight trace context for header propagation.
    
        The default implementation adapts the current trace ID (if any) exposed
        by the tracing helpers. Tests monkeypatch this function to inject a
        deterministic trace identifier.
        """
    
>       from ..tracing import get_current_trace_id
E       ModuleNotFoundError: No module named 'theo.infrastructure.api.app.tracing'

theo\infrastructure\api\app\bootstrap\app_factory.py:139: ModuleNotFoundError
------------------------------ Captured log call ------------------------------
WARNING  theo.infrastructure.api.app.bootstrap.lifecycle:lifecycle.py:85 Failed to start discovery scheduler
Traceback (most recent call last):
  File "C:\Users\dmedl\Projects\Theoria\theo\infrastructure\api\app\bootstrap\lifecycle.py", line 79, in lifespan
    from ..workers.discovery_scheduler import start_discovery_scheduler
  File "C:\Users\dmedl\Projects\Theoria\theo\infrastructure\api\app\workers\discovery_scheduler.py", line 18, in <module>
    from ..discoveries import DiscoveryService
ModuleNotFoundError: No module named 'theo.infrastructure.api.app.discoveries'
============================== warnings summary ===============================
..\..\AppData\Roaming\Python\Python312\site-packages\_pytest\config\__init__.py:833
  C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\_pytest\config\__init__.py:833: PytestAssertRewriteWarning: Module already imported so cannot be rewritten; celery.contrib.pytest
    self.import_plugin(import_spec)

<frozen importlib._bootstrap>:488
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyPacked has no __module__ attribute

<frozen importlib._bootstrap>:488
  <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyObject has no __module__ attribute

..\..\AppData\Roaming\Python\Python312\site-packages\google\protobuf\internal\well_known_types.py:91
  C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\google\protobuf\internal\well_known_types.py:91: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).
    _EPOCH_DATETIME_NAIVE = datetime.datetime.utcfromtimestamp(0)

..\..\AppData\Roaming\Python\Python312\site-packages\testcontainers\core\waiting_utils.py:215
  C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\testcontainers\core\waiting_utils.py:215: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready()

..\..\AppData\Roaming\Python\Python312\site-packages\testcontainers\postgres\__init__.py:90
  C:\Users\dmedl\AppData\Roaming\Python\Python312\site-packages\testcontainers\postgres\__init__.py:90: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
============================ slowest 50 durations =============================
0.99s setup    tests/api/test_health.py::test_health_service_propagates_degraded_status
0.50s call     tests/api/test_health.py::test_health_endpoint_reports_worst_status

(4 durations < 0.05s hidden.)
=========================== short test summary info ===========================
FAILED tests/api/test_health.py::test_health_endpoint_reports_worst_status - ...
=================== 1 failed, 1 passed, 6 warnings in 2.14s ===================
sys:1: DeprecationWarning: builtin type swigvarlink has no __module__ attribute
