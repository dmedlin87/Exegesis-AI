# Test Coverage Report

| Name | Stmts | Miss | Branch | BrPart | Cover |
|------|-------|------|--------|--------|-------|
| tests\unit\domain\test_domain_errors.py | 39 | 0 | 0 | 0 | 100% |
| tests\unit\test_chat_memory.py | 33 | 0 | 0 | 0 | 100% |
| tests\unit\test_cli_helpers.py | 184 | 46 | 8 | 3 | 74% |
| tests\unit\test_discovery_engine.py | 6 | 0 | 0 | 0 | 100% |
| tests\unit\test_marker_opt_in.py | 29 | 1 | 2 | 1 | 94% |
| tests\unit\test_runtime.py | 43 | 0 | 8 | 0 | 100% |
| tests\unit\test_tracing_unit.py | 43 | 0 | 0 | 0 | 100% |
| tests\utils\query_profiler.py | 20 | 0 | 2 | 0 | 100% |
| tests\workers\conftest.py | 194 | 25 | 38 | 7 | 84% |
| tests\workers\test_task_retries.py | 101 | 80 | 0 | 0 | 21% |
| tests\workers\test_tasks.py | 377 | 22 | 12 | 5 | 93% |
| tests\workers\test_tasks_optimized.py | 162 | 64 | 12 | 2 | 57% |
| tests\workers\test_tasks_perf_patch.py | 115 | 10 | 6 | 3 | 89% |
| theo\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\adapters\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\adapters\biblical_ai_processor.py | 153 | 40 | 44 | 14 | 73% |
| theo\adapters\events\__init__.py | 14 | 1 | 4 | 2 | 83% |
| theo\adapters\events\kafka.py | 77 | 28 | 16 | 5 | 58% |
| theo\adapters\events\redis.py | 29 | 2 | 6 | 1 | 91% |
| theo\adapters\graph\__init__.py | 1 | 1 | 0 | 0 | 0% |
| theo\adapters\persistence\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\adapters\persistence\base_repository.py | 39 | 0 | 2 | 0 | 100% |
| theo\adapters\persistence\chat_repository.py | 21 | 0 | 2 | 0 | 100% |
| theo\adapters\persistence\discovery_repository.py | 108 | 4 | 18 | 2 | 95% |
| theo\adapters\persistence\document_repository.py | 146 | 5 | 66 | 11 | 92% |
| theo\adapters\persistence\embedding_repository.py | 62 | 2 | 24 | 4 | 93% |
| theo\adapters\persistence\ingestion_job_repository.py | 71 | 15 | 18 | 2 | 74% |
| theo\adapters\persistence\mappers.py | 32 | 3 | 10 | 3 | 86% |
| theo\adapters\persistence\migrations\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\adapters\persistence\migrations\env.py | 14 | 14 | 4 | 0 | 0% |
| theo\adapters\persistence\migrations\versions\2b90f4b3d8dc_add_core_indexes.py | 31 | 31 | 8 | 0 | 0% |
| theo\adapters\persistence\migrations\versions\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\adapters\persistence\models.py | 668 | 6 | 12 | 4 | 98% |
| theo\adapters\persistence\passage_embedding_store.py | 25 | 2 | 6 | 2 | 87% |
| theo\adapters\persistence\sqlalchemy_support.py | 7 | 0 | 0 | 0 | 100% |
| theo\adapters\persistence\sqlite.py | 122 | 86 | 64 | 6 | 27% |
| theo\adapters\persistence\transcript_repository.py | 69 | 12 | 24 | 10 | 76% |
| theo\adapters\persistence\types.py | 97 | 38 | 38 | 8 | 59% |
| theo\adapters\registry.py | 36 | 13 | 6 | 1 | 62% |
| theo\adapters\research\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\adapters\research\hypotheses_sqlalchemy.py | 78 | 0 | 40 | 8 | 93% |
| theo\adapters\research\sqlalchemy.py | 89 | 6 | 32 | 10 | 85% |
| theo\adapters\secrets\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\adapters\secrets\aws.py | 50 | 9 | 16 | 4 | 80% |
| theo\adapters\secrets\vault.py | 45 | 4 | 16 | 4 | 87% |
| theo\application\__init__.py | 13 | 0 | 2 | 0 | 100% |
| theo\application\dtos\__init__.py | 5 | 0 | 0 | 0 | 100% |
| theo\application\dtos\chat.py | 11 | 0 | 0 | 0 | 100% |
| theo\application\dtos\discovery.py | 33 | 0 | 0 | 0 | 100% |
| theo\application\dtos\document.py | 37 | 0 | 0 | 0 | 100% |
| theo\application\dtos\ingestion_job.py | 18 | 18 | 0 | 0 | 0% |
| theo\application\dtos\transcript.py | 19 | 0 | 0 | 0 | 100% |
| theo\application\embeddings\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\application\embeddings\checkpoint_store.py | 107 | 13 | 34 | 11 | 83% |
| theo\application\embeddings\rebuild_service.py | 143 | 9 | 34 | 8 | 90% |
| theo\application\embeddings\store.py | 52 | 6 | 26 | 7 | 81% |
| theo\application\facades\__init__.py | 18 | 11 | 4 | 0 | 32% |
| theo\application\facades\database.py | 116 | 23 | 32 | 7 | 74% |
| theo\application\facades\events.py | 37 | 2 | 14 | 2 | 92% |
| theo\application\facades\research.py | 17 | 1 | 2 | 1 | 89% |
| theo\application\facades\resilience.py | 35 | 0 | 2 | 0 | 100% |
| theo\application\facades\runtime.py | 45 | 10 | 12 | 0 | 75% |
| theo\application\facades\secret_migration.py | 84 | 13 | 46 | 15 | 78% |
| theo\application\facades\security.py | 14 | 0 | 2 | 0 | 100% |
| theo\application\facades\settings.py | 302 | 26 | 88 | 10 | 89% |
| theo\application\facades\settings_store.py | 84 | 14 | 32 | 9 | 77% |
| theo\application\facades\telemetry.py | 44 | 0 | 14 | 1 | 98% |
| theo\application\facades\version.py | 15 | 0 | 2 | 0 | 100% |
| theo\application\graph.py | 23 | 0 | 0 | 0 | 100% |
| theo\application\interfaces.py | 12 | 0 | 0 | 0 | 100% |
| theo\application\observability.py | 69 | 2 | 14 | 2 | 95% |
| theo\application\ports\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\application\ports\ai_registry.py | 179 | 34 | 84 | 13 | 76% |
| theo\application\ports\events.py | 65 | 6 | 22 | 2 | 86% |
| theo\application\ports\secrets.py | 21 | 10 | 6 | 0 | 41% |
| theo\application\repositories\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\application\repositories\chat_repository.py | 7 | 0 | 0 | 0 | 100% |
| theo\application\repositories\discovery_repository.py | 26 | 0 | 0 | 0 | 100% |
| theo\application\repositories\document_repository.py | 15 | 0 | 0 | 0 | 100% |
| theo\application\repositories\embedding_repository.py | 26 | 0 | 0 | 0 | 100% |
| theo\application\repositories\ingestion_job_repository.py | 11 | 0 | 0 | 0 | 100% |
| theo\application\repositories\transcript_repository.py | 7 | 0 | 0 | 0 | 100% |
| theo\application\research\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\application\research\service.py | 90 | 3 | 12 | 2 | 95% |
| theo\application\resilience.py | 27 | 0 | 0 | 0 | 100% |
| theo\application\search\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\application\search\query_rewriter.py | 99 | 5 | 40 | 4 | 94% |
| theo\application\security.py | 12 | 0 | 0 | 0 | 100% |
| theo\application\services\__init__.py | 15 | 5 | 4 | 1 | 58% |
| theo\application\services\bootstrap.py | 167 | 4 | 44 | 2 | 97% |
| theo\application\services\container.py | 29 | 0 | 0 | 0 | 100% |
| theo\application\services\geo\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\application\services\geo\seed_openbible_geo.py | 330 | 56 | 118 | 33 | 80% |
| theo\application\telemetry.py | 26 | 0 | 0 | 0 | 100% |
| theo\cli.py | 36 | 21 | 10 | 1 | 35% |
| theo\commands\__init__.py | 8 | 0 | 0 | 0 | 100% |
| theo\commands\database_ops.py | 5 | 0 | 0 | 0 | 100% |
| theo\commands\embedding_rebuild.py | 204 | 71 | 68 | 10 | 62% |
| theo\commands\import_export.py | 5 | 0 | 0 | 0 | 100% |
| theo\data\research\__init__.py | 16 | 0 | 0 | 0 | 100% |
| theo\domain\__init__.py | 5 | 0 | 0 | 0 | 100% |
| theo\domain\biblical_texts.py | 177 | 1 | 28 | 4 | 98% |
| theo\domain\discoveries\__init__.py | 8 | 0 | 0 | 0 | 100% |
| theo\domain\discoveries\anomaly_engine.py | 67 | 4 | 16 | 4 | 90% |
| theo\domain\discoveries\connection_engine.py | 112 | 5 | 46 | 6 | 93% |
| theo\domain\discoveries\contradiction_engine.py | 178 | 24 | 56 | 13 | 84% |
| theo\domain\discoveries\engine.py | 89 | 5 | 36 | 8 | 90% |
| theo\domain\discoveries\gap_engine.py | 157 | 18 | 62 | 12 | 86% |
| theo\domain\discoveries\models.py | 36 | 0 | 0 | 0 | 100% |
| theo\domain\discoveries\trend_engine.py | 147 | 23 | 66 | 22 | 78% |
| theo\domain\documents.py | 19 | 0 | 0 | 0 | 100% |
| theo\domain\errors.py | 29 | 0 | 0 | 0 | 100% |
| theo\domain\mappers\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\domain\mappers\passage_mapper.py | 169 | 50 | 70 | 22 | 62% |
| theo\domain\references.py | 15 | 0 | 4 | 0 | 100% |
| theo\domain\repositories\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\domain\repositories\biblical_texts.py | 89 | 16 | 10 | 1 | 83% |
| theo\domain\repositories\hypotheses.py | 7 | 0 | 0 | 0 | 100% |
| theo\domain\repositories\research_notes.py | 10 | 0 | 0 | 0 | 100% |
| theo\domain\research\__init__.py | 10 | 0 | 0 | 0 | 100% |
| theo\domain\research\crossrefs.py | 16 | 0 | 0 | 0 | 100% |
| theo\domain\research\datasets.py | 55 | 4 | 0 | 0 | 93% |
| theo\domain\research\dss_links.py | 42 | 0 | 12 | 0 | 100% |
| theo\domain\research\entities.py | 76 | 0 | 0 | 0 | 100% |
| theo\domain\research\fallacies.py | 35 | 0 | 10 | 0 | 100% |
| theo\domain\research\historicity.py | 58 | 6 | 18 | 6 | 84% |
| theo\domain\research\morphology.py | 15 | 2 | 0 | 0 | 87% |
| theo\domain\research\osis.py | 106 | 19 | 56 | 11 | 79% |
| theo\domain\research\overview.py | 103 | 5 | 44 | 7 | 92% |
| theo\domain\research\scripture.py | 66 | 16 | 22 | 1 | 74% |
| theo\domain\research\variants.py | 84 | 8 | 26 | 5 | 88% |
| theo\domain\services\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\domain\services\embeddings\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\domain\services\embeddings\config.py | 106 | 54 | 18 | 0 | 42% |
| theo\infrastructure\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\__init__.py | 7 | 2 | 4 | 2 | 64% |
| theo\infrastructure\api\app\adapters\__init__.py | 4 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\adapters\resilience.py | 124 | 14 | 30 | 3 | 85% |
| theo\infrastructure\api\app\adapters\security.py | 110 | 14 | 42 | 12 | 83% |
| theo\infrastructure\api\app\adapters\telemetry.py | 176 | 25 | 42 | 8 | 84% |
| theo\infrastructure\api\app\ai\__init__.py | 29 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\audit_logging.py | 99 | 18 | 38 | 9 | 76% |
| theo\infrastructure\api\app\ai\cache\__init__.py | 2 | 2 | 0 | 0 | 0% |
| theo\infrastructure\api\app\ai\cache\cache_manager.py | 27 | 27 | 8 | 0 | 0% |
| theo\infrastructure\api\app\ai\clients\__init__.py | 6 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\clients\anthropic_client.py | 32 | 20 | 12 | 0 | 27% |
| theo\infrastructure\api\app\ai\clients\factory.py | 15 | 5 | 4 | 0 | 53% |
| theo\infrastructure\api\app\ai\clients\openai_client.py | 35 | 23 | 10 | 0 | 27% |
| theo\infrastructure\api\app\ai\digest_service.py | 26 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\ai\guardrails\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\guardrails\schemas.py | 35 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\ledger.py | 441 | 79 | 136 | 24 | 79% |
| theo\infrastructure\api\app\ai\ledger\__init__.py | 13 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\ledger\usage_tracker.py | 34 | 17 | 4 | 0 | 45% |
| theo\infrastructure\api\app\ai\legacy_clients.py | 426 | 130 | 152 | 37 | 62% |
| theo\infrastructure\api\app\ai\memory_index.py | 72 | 15 | 24 | 6 | 72% |
| theo\infrastructure\api\app\ai\memory_metadata.py | 131 | 6 | 62 | 12 | 91% |
| theo\infrastructure\api\app\ai\passage.py | 62 | 7 | 32 | 7 | 85% |
| theo\infrastructure\api\app\ai\rag\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\rag\cache.py | 81 | 16 | 10 | 3 | 77% |
| theo\infrastructure\api\app\ai\rag\cache_ops.py | 12 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\rag\chat.py | 266 | 41 | 86 | 20 | 79% |
| theo\infrastructure\api\app\ai\rag\collaboration.py | 30 | 0 | 4 | 2 | 94% |
| theo\infrastructure\api\app\ai\rag\corpus.py | 34 | 9 | 10 | 3 | 64% |
| theo\infrastructure\api\app\ai\rag\deliverables.py | 119 | 21 | 28 | 11 | 78% |
| theo\infrastructure\api\app\ai\rag\exports.py | 273 | 73 | 108 | 25 | 69% |
| theo\infrastructure\api\app\ai\rag\guardrail_helpers.py | 38 | 6 | 0 | 0 | 84% |
| theo\infrastructure\api\app\ai\rag\guardrails.py | 272 | 55 | 114 | 23 | 76% |
| theo\infrastructure\api\app\ai\rag\models.py | 109 | 0 | 2 | 1 | 99% |
| theo\infrastructure\api\app\ai\rag\prompts.py | 89 | 15 | 34 | 6 | 78% |
| theo\infrastructure\api\app\ai\rag\reasoning.py | 47 | 0 | 8 | 3 | 95% |
| theo\infrastructure\api\app\ai\rag\reasoning_trace.py | 54 | 38 | 22 | 2 | 24% |
| theo\infrastructure\api\app\ai\rag\refusals.py | 46 | 0 | 6 | 0 | 100% |
| theo\infrastructure\api\app\ai\rag\retrieval.py | 40 | 5 | 12 | 4 | 83% |
| theo\infrastructure\api\app\ai\rag\revisions.py | 16 | 1 | 4 | 1 | 90% |
| theo\infrastructure\api\app\ai\rag\telemetry.py | 35 | 1 | 10 | 2 | 93% |
| theo\infrastructure\api\app\ai\rag\verse.py | 31 | 0 | 4 | 2 | 94% |
| theo\infrastructure\api\app\ai\rag\workflow.py | 47 | 0 | 6 | 0 | 100% |
| theo\infrastructure\api\app\ai\reasoning\__init__.py | 7 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ai\reasoning\chain_of_thought.py | 63 | 9 | 16 | 1 | 82% |
| theo\infrastructure\api\app\ai\reasoning\fallacies.py | 135 | 14 | 40 | 7 | 85% |
| theo\infrastructure\api\app\ai\reasoning\hypotheses.py | 408 | 233 | 178 | 23 | 36% |
| theo\infrastructure\api\app\ai\reasoning\insights.py | 63 | 4 | 20 | 4 | 90% |
| theo\infrastructure\api\app\ai\reasoning\metacognition.py | 419 | 53 | 164 | 29 | 84% |
| theo\infrastructure\api\app\ai\reasoning\perspectives.py | 138 | 16 | 52 | 17 | 83% |
| theo\infrastructure\api\app\ai\registry.py | 22 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\ai\research_loop.py | 350 | 71 | 122 | 39 | 75% |
| theo\infrastructure\api\app\ai\router.py | 422 | 74 | 130 | 26 | 80% |
| theo\infrastructure\api\app\ai\routing\__init__.py | 2 | 2 | 0 | 0 | 0% |
| theo\infrastructure\api\app\ai\routing\router.py | 106 | 106 | 24 | 0 | 0% |
| theo\infrastructure\api\app\ai\trails.py | 323 | 106 | 114 | 20 | 60% |
| theo\infrastructure\api\app\ai\trails_memory_bridge.py | 131 | 23 | 56 | 19 | 74% |
| theo\infrastructure\api\app\ai\watchlists_service.py | 34 | 8 | 2 | 0 | 78% |
| theo\infrastructure\api\app\analytics\agent_evaluation.py | 162 | 12 | 48 | 5 | 91% |
| theo\infrastructure\api\app\analytics\experiments.py | 72 | 11 | 18 | 5 | 82% |
| theo\infrastructure\api\app\analytics\openalex.py | 330 | 47 | 170 | 44 | 80% |
| theo\infrastructure\api\app\analytics\openalex_enrichment.py | 149 | 21 | 70 | 28 | 78% |
| theo\infrastructure\api\app\analytics\telemetry.py | 15 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\analytics\topic_map.py | 166 | 34 | 64 | 18 | 77% |
| theo\infrastructure\api\app\analytics\topics.py | 154 | 53 | 64 | 13 | 62% |
| theo\infrastructure\api\app\analytics\watchlists.py | 228 | 160 | 118 | 7 | 23% |
| theo\infrastructure\api\app\bootstrap\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\bootstrap\app_factory.py | 131 | 6 | 24 | 8 | 91% |
| theo\infrastructure\api\app\bootstrap\lifecycle.py | 41 | 0 | 4 | 2 | 96% |
| theo\infrastructure\api\app\bootstrap\middleware.py | 69 | 8 | 12 | 1 | 86% |
| theo\infrastructure\api\app\bootstrap\routes.py | 45 | 7 | 8 | 0 | 83% |
| theo\infrastructure\api\app\bootstrap\runtime_checks.py | 56 | 6 | 18 | 1 | 88% |
| theo\infrastructure\api\app\compat\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\core\__init__.py | 2 | 2 | 0 | 0 | 0% |
| theo\infrastructure\api\app\core\database.py | 9 | 9 | 0 | 0 | 0% |
| theo\infrastructure\api\app\core\runtime.py | 6 | 6 | 0 | 0 | 0% |
| theo\infrastructure\api\app\core\secret_migration.py | 6 | 6 | 0 | 0 | 0% |
| theo\infrastructure\api\app\core\settings.py | 8 | 8 | 0 | 0 | 0% |
| theo\infrastructure\api\app\core\settings_store.py | 10 | 10 | 0 | 0 | 0% |
| theo\infrastructure\api\app\core\version.py | 6 | 6 | 0 | 0 | 0% |
| theo\infrastructure\api\app\creators\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\creators\service.py | 66 | 4 | 24 | 6 | 89% |
| theo\infrastructure\api\app\creators\verse_perspectives.py | 177 | 86 | 78 | 10 | 44% |
| theo\infrastructure\api\app\db\feedback.py | 13 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\db\migrations\20250315_add_seed_verse_ranges.py | 20 | 3 | 4 | 2 | 79% |
| theo\infrastructure\api\app\db\migrations\20250315_backfill_seed_verse_ranges.py | 34 | 18 | 14 | 2 | 38% |
| theo\infrastructure\api\app\db\migrations\20250325_backfill_seed_verse_ranges.py | 66 | 45 | 32 | 4 | 26% |
| theo\infrastructure\api\app\db\migrations\20250328_backfill_passage_verse_ranges.py | 63 | 45 | 36 | 2 | 20% |
| theo\infrastructure\api\app\db\migrations\20250405_discoveries_tables.py | 13 | 2 | 4 | 2 | 76% |
| theo\infrastructure\api\app\db\migrations\20250420_audit_logs.py | 13 | 2 | 4 | 2 | 76% |
| theo\infrastructure\api\app\db\migrations\20250424_audit_claim_cards.py | 14 | 5 | 4 | 1 | 56% |
| theo\infrastructure\api\app\db\migrations\20250430_ensure_contradiction_perspective.py | 10 | 3 | 0 | 0 | 70% |
| theo\infrastructure\api\app\db\migrations\20250510_remove_case_builder.py | 11 | 3 | 2 | 1 | 69% |
| theo\infrastructure\api\app\db\query_optimizations.py | 58 | 13 | 6 | 0 | 77% |
| theo\infrastructure\api\app\db\run_sql_migrations.py | 436 | 128 | 188 | 29 | 67% |
| theo\infrastructure\api\app\db\seeds.py | 814 | 345 | 404 | 98 | 52% |
| theo\infrastructure\api\app\db\verse_graph.py | 174 | 19 | 76 | 23 | 83% |
| theo\infrastructure\api\app\debug\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\debug\middleware.py | 121 | 29 | 44 | 12 | 70% |
| theo\infrastructure\api\app\debug\reporting.py | 103 | 3 | 26 | 1 | 97% |
| theo\infrastructure\api\app\discoveries\__init__.py | 3 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\discoveries\service.py | 104 | 66 | 14 | 1 | 33% |
| theo\infrastructure\api\app\discoveries\tasks.py | 30 | 4 | 4 | 1 | 85% |
| theo\infrastructure\api\app\enrich\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\enrich\metadata.py | 353 | 54 | 186 | 56 | 77% |
| theo\infrastructure\api\app\error_handlers.py | 47 | 1 | 22 | 1 | 97% |
| theo\infrastructure\api\app\errors.py | 45 | 1 | 6 | 0 | 98% |
| theo\infrastructure\api\app\export\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\export\citations.py | 595 | 49 | 376 | 60 | 88% |
| theo\infrastructure\api\app\export\formatters.py | 266 | 8 | 102 | 15 | 94% |
| theo\infrastructure\api\app\export\zotero.py | 130 | 26 | 78 | 11 | 76% |
| theo\infrastructure\api\app\graphql\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\graphql\context.py | 22 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\graphql\router.py | 10 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\graphql\schema.py | 43 | 0 | 8 | 0 | 100% |
| theo\infrastructure\api\app\graphql\types.py | 68 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\infra\__init__.py | 4 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\infra\health.py | 123 | 35 | 26 | 3 | 68% |
| theo\infrastructure\api\app\infra\ingestion_service.py | 150 | 25 | 46 | 8 | 78% |
| theo\infrastructure\api\app\infra\registry.py | 15 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\infra\retrieval_service.py | 284 | 30 | 118 | 23 | 84% |
| theo\infrastructure\api\app\infra\router_registry.py | 13 | 0 | 4 | 1 | 94% |
| theo\infrastructure\api\app\ingest\__init__.py | 11 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\ingest\chunking.py | 129 | 14 | 46 | 9 | 87% |
| theo\infrastructure\api\app\ingest\embeddings.py | 164 | 14 | 62 | 15 | 86% |
| theo\infrastructure\api\app\ingest\events.py | 39 | 1 | 8 | 1 | 96% |
| theo\infrastructure\api\app\ingest\exceptions.py | 1 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ingest\metadata.py | 404 | 67 | 210 | 34 | 78% |
| theo\infrastructure\api\app\ingest\network.py | 273 | 41 | 104 | 24 | 82% |
| theo\infrastructure\api\app\ingest\orchestrator.py | 55 | 2 | 10 | 1 | 95% |
| theo\infrastructure\api\app\ingest\osis.py | 227 | 29 | 118 | 25 | 82% |
| theo\infrastructure\api\app\ingest\parsers.py | 414 | 234 | 148 | 13 | 39% |
| theo\infrastructure\api\app\ingest\persistence.py | 592 | 333 | 258 | 36 | 38% |
| theo\infrastructure\api\app\ingest\pipeline.py | 155 | 3 | 36 | 5 | 96% |
| theo\infrastructure\api\app\ingest\sanitizer.py | 20 | 0 | 10 | 0 | 100% |
| theo\infrastructure\api\app\ingest\stages\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\ingest\stages\base.py | 46 | 5 | 4 | 2 | 86% |
| theo\infrastructure\api\app\ingest\stages\enrichers.py | 52 | 7 | 14 | 5 | 76% |
| theo\infrastructure\api\app\ingest\stages\fetchers.py | 119 | 49 | 14 | 2 | 54% |
| theo\infrastructure\api\app\ingest\stages\parsers.py | 186 | 83 | 42 | 8 | 51% |
| theo\infrastructure\api\app\ingest\stages\persisters.py | 97 | 52 | 20 | 2 | 40% |
| theo\infrastructure\api\app\ingest\tei_pipeline.py | 173 | 143 | 64 | 0 | 13% |
| theo\infrastructure\api\app\intent\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\intent\tagger.py | 98 | 11 | 26 | 6 | 86% |
| theo\infrastructure\api\app\main.py | 94 | 14 | 20 | 7 | 80% |
| theo\infrastructure\api\app\mcp\__init__.py | 2 | 2 | 0 | 0 | 0% |
| theo\infrastructure\api\app\mcp\tools.py | 56 | 56 | 22 | 0 | 0% |
| theo\infrastructure\api\app\models\__init__.py | 4 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\ai.py | 257 | 3 | 12 | 1 | 99% |
| theo\infrastructure\api\app\models\analytics.py | 23 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\audit.py | 41 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\base.py | 23 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\creators.py | 58 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\dashboard.py | 42 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\discoveries.py | 37 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\documents.py | 163 | 9 | 40 | 7 | 92% |
| theo\infrastructure\api\app\models\export.py | 132 | 1 | 6 | 2 | 98% |
| theo\infrastructure\api\app\models\jobs.py | 110 | 31 | 30 | 6 | 62% |
| theo\infrastructure\api\app\models\notebooks.py | 80 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\reasoning.py | 42 | 42 | 0 | 0 | 0% |
| theo\infrastructure\api\app\models\research.py | 282 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\research_plan.py | 56 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\models\search.py | 33 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\trails.py | 59 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\transcripts.py | 20 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\verses.py | 57 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\models\watchlists.py | 51 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\notebooks\service.py | 267 | 114 | 130 | 27 | 50% |
| theo\infrastructure\api\app\persistence_models.py | 9 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\ranking\__init__.py | 13 | 5 | 2 | 0 | 53% |
| theo\infrastructure\api\app\ranking\features.py | 13 | 0 | 4 | 0 | 100% |
| theo\infrastructure\api\app\ranking\metrics.py | 28 | 19 | 14 | 2 | 26% |
| theo\infrastructure\api\app\ranking\mlflow_integration.py | 100 | 65 | 42 | 3 | 28% |
| theo\infrastructure\api\app\ranking\re_ranker.py | 143 | 45 | 70 | 23 | 63% |
| theo\infrastructure\api\app\research\__init__.py | 5 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\research\commentaries.py | 36 | 5 | 16 | 5 | 81% |
| theo\infrastructure\api\app\research\contradictions.py | 73 | 11 | 32 | 10 | 80% |
| theo\infrastructure\api\app\research\data\__init__.py | 9 | 9 | 0 | 0 | 0% |
| theo\infrastructure\api\app\research\evidence_cards.py | 38 | 3 | 14 | 3 | 88% |
| theo\infrastructure\api\app\research\geo.py | 200 | 95 | 96 | 10 | 46% |
| theo\infrastructure\api\app\resilience.py | 3 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\retriever\__init__.py | 1 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\retriever\annotations.py | 89 | 4 | 40 | 6 | 92% |
| theo\infrastructure\api\app\retriever\documents.py | 94 | 46 | 30 | 7 | 44% |
| theo\infrastructure\api\app\retriever\export.py | 125 | 108 | 62 | 0 | 9% |
| theo\infrastructure\api\app\retriever\graph.py | 80 | 6 | 28 | 4 | 87% |
| theo\infrastructure\api\app\retriever\hybrid.py | 529 | 42 | 256 | 34 | 89% |
| theo\infrastructure\api\app\retriever\tests\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\retriever\tests\test_export_mentions.py | 23 | 23 | 0 | 0 | 0% |
| theo\infrastructure\api\app\retriever\tests\test_filters.py | 42 | 42 | 2 | 0 | 0% |
| theo\infrastructure\api\app\retriever\utils.py | 38 | 0 | 32 | 1 | 99% |
| theo\infrastructure\api\app\retriever\verses.py | 323 | 118 | 184 | 40 | 57% |
| theo\infrastructure\api\app\routes\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\ai\__init__.py | 12 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\ai\digest.py | 21 | 4 | 0 | 0 | 81% |
| theo\infrastructure\api\app\routes\ai\watchlists.py | 63 | 3 | 2 | 0 | 95% |
| theo\infrastructure\api\app\routes\ai\workflows\__init__.py | 14 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\ai\workflows\chat.py | 619 | 153 | 242 | 57 | 72% |
| theo\infrastructure\api\app\routes\ai\workflows\exports.py | 201 | 22 | 70 | 17 | 81% |
| theo\infrastructure\api\app\routes\ai\workflows\features.py | 9 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\ai\workflows\flows.py | 114 | 21 | 8 | 4 | 80% |
| theo\infrastructure\api\app\routes\ai\workflows\guardrails.py | 141 | 17 | 64 | 9 | 83% |
| theo\infrastructure\api\app\routes\ai\workflows\llm.py | 69 | 41 | 36 | 0 | 27% |
| theo\infrastructure\api\app\routes\ai\workflows\perspectives.py | 20 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\ai\workflows\settings.py | 88 | 66 | 40 | 0 | 17% |
| theo\infrastructure\api\app\routes\ai\workflows\utils.py | 8 | 0 | 2 | 0 | 100% |
| theo\infrastructure\api\app\routes\analytics.py | 20 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\creators.py | 40 | 21 | 4 | 0 | 43% |
| theo\infrastructure\api\app\routes\dashboard.py | 87 | 6 | 18 | 4 | 90% |
| theo\infrastructure\api\app\routes\discoveries.py | 79 | 55 | 6 | 0 | 28% |
| theo\infrastructure\api\app\routes\discoveries_v1.py | 34 | 2 | 2 | 0 | 94% |
| theo\infrastructure\api\app\routes\documents.py | 58 | 3 | 0 | 0 | 95% |
| theo\infrastructure\api\app\routes\export\__init__.py | 19 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\routes\export\citations.py | 57 | 40 | 20 | 0 | 22% |
| theo\infrastructure\api\app\routes\export\deliverables.py | 53 | 20 | 18 | 4 | 61% |
| theo\infrastructure\api\app\routes\export\documents.py | 25 | 12 | 2 | 0 | 48% |
| theo\infrastructure\api\app\routes\export\search.py | 30 | 2 | 4 | 2 | 88% |
| theo\infrastructure\api\app\routes\export\utils.py | 46 | 3 | 8 | 3 | 89% |
| theo\infrastructure\api\app\routes\export\zotero.py | 33 | 2 | 4 | 0 | 95% |
| theo\infrastructure\api\app\routes\features.py | 12 | 4 | 0 | 0 | 67% |
| theo\infrastructure\api\app\routes\ingest.py | 228 | 58 | 50 | 13 | 73% |
| theo\infrastructure\api\app\routes\jobs.py | 205 | 98 | 52 | 9 | 45% |
| theo\infrastructure\api\app\routes\notebooks.py | 46 | 10 | 0 | 0 | 78% |
| theo\infrastructure\api\app\routes\realtime.py | 80 | 13 | 6 | 1 | 84% |
| theo\infrastructure\api\app\routes\research.py | 156 | 100 | 32 | 0 | 30% |
| theo\infrastructure\api\app\routes\search.py | 55 | 0 | 24 | 0 | 100% |
| theo\infrastructure\api\app\routes\trails.py | 29 | 17 | 6 | 0 | 34% |
| theo\infrastructure\api\app\routes\transcripts.py | 18 | 8 | 2 | 0 | 50% |
| theo\infrastructure\api\app\routes\verses.py | 30 | 12 | 2 | 0 | 56% |
| theo\infrastructure\api\app\telemetry.py | 3 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\tracing.py | 47 | 1 | 14 | 1 | 97% |
| theo\infrastructure\api\app\transcripts\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\transcripts\service.py | 65 | 22 | 40 | 9 | 59% |
| theo\infrastructure\api\app\use_cases\__init__.py | 2 | 2 | 0 | 0 | 0% |
| theo\infrastructure\api\app\use_cases\refresh_discoveries.py | 43 | 43 | 4 | 0 | 0% |
| theo\infrastructure\api\app\utils\__init__.py | 2 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\utils\imports.py | 25 | 0 | 6 | 1 | 97% |
| theo\infrastructure\api\app\versioning.py | 48 | 17 | 16 | 1 | 56% |
| theo\infrastructure\api\app\workers\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\app\workers\discovery_scheduler.py | 85 | 37 | 12 | 0 | 56% |
| theo\infrastructure\api\app\workers\tasks.py | 607 | 204 | 178 | 46 | 62% |
| theo\infrastructure\api\tests\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\tests\conftest.py | 81 | 81 | 14 | 0 | 0% |
| theo\infrastructure\api\tests\test_agent_evaluation.py | 83 | 83 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_ai_routes.py | 434 | 434 | 22 | 0 | 0% |
| theo\infrastructure\api\tests\test_creator_profiles.py | 107 | 107 | 2 | 0 | 0% |
| theo\infrastructure\api\tests\test_enrich_metadata.py | 4 | 4 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_error_handling.py | 43 | 43 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_export_formatters.py | 16 | 16 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_features.py | 31 | 31 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_hybrid_retriever.py | 52 | 52 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_ingest_and_search.py | 230 | 230 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_jobs.py | 203 | 203 | 10 | 0 | 0% |
| theo\infrastructure\api\tests\test_lazy_import_module.py | 40 | 40 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_notifications.py | 35 | 35 | 2 | 0 | 0% |
| theo\infrastructure\api\tests\test_osis.py | 30 | 30 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_osis_utils.py | 22 | 22 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_passage_parser.py | 12 | 12 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_reasoning_trace.py | 15 | 15 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_research_routes.py | 267 | 267 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_security.py | 61 | 61 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_settings.py | 25 | 25 | 2 | 0 | 0% |
| theo\infrastructure\api\tests\test_topics.py | 64 | 64 | 2 | 0 | 0% |
| theo\infrastructure\api\tests\test_trails.py | 76 | 76 | 2 | 0 | 0% |
| theo\infrastructure\api\tests\test_transcript_ingest.py | 40 | 40 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_transcript_search.py | 44 | 44 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\test_watchlists.py | 67 | 67 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\workers\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\infrastructure\api\tests\workers\test_discovery_scheduler.py | 145 | 145 | 0 | 0 | 0% |
| theo\infrastructure\api\tests\workers\test_discovery_tasks.py | 84 | 84 | 4 | 0 | 0% |
| theo\infrastructure\api\tests\workers\test_tasks_properties.py | 60 | 60 | 6 | 0 | 0% |
| theo\services\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\services\api\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\services\api\app\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\services\cli\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\services\cli\batch_intel.py | 68 | 68 | 18 | 0 | 0% |
| theo\services\cli\code_quality.py | 119 | 15 | 44 | 10 | 85% |
| theo\services\cli\export_data.py | 245 | 83 | 80 | 23 | 59% |
| theo\services\cli\ingest_folder.py | 258 | 70 | 102 | 11 | 72% |
| theo\services\cli\ingest_osis.py | 33 | 17 | 10 | 0 | 37% |
| theo\services\cli\migrate_settings.py | 25 | 25 | 10 | 0 | 0% |
| theo\services\cli\rag_eval.py | 321 | 91 | 130 | 41 | 65% |
| theo\services\cli\refresh_hnsw.py | 41 | 4 | 10 | 1 | 90% |
| theo\services\cli\tests\__init__.py | 0 | 0 | 0 | 0 | 100% |
| theo\services\cli\tests\test_cli_code_quality.py | 43 | 43 | 2 | 0 | 4% |
| theo\services\cli\tests\test_export_data.py | 87 | 87 | 6 | 0 | 0% |
| theo\services\cli\tests\test_ingest_folder.py | 175 | 175 | 4 | 0 | 1% |
| validate_test_env.py | 41 | 41 | 10 | 0 | 0% |
| webvtt\__init__.py | 123 | 89 | 40 | 4 | 26% |
| TOTAL | 60926 | 14085 | 11904 | 2241 | 74% |
